<HTML>
<HEAD>
<meta http-equiv="Content-Language" content="fr">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<TITLE> next-nx-messenger.c </TITLE>
</HEAD>
<BODY bgcolor=ffffff text="#666666">
<div align="center">
    <center>
    <pre>
<img src="images/messenger.jpg" width="400" height="65">
</pre>
    </center>
  </div>
    <p>
<br>
<font size="2" face="Courier New">Next[NX] est programme de script mIRC monté
par le groupe Epsylon, tout le monde a le droit de contribuer au programme,<br>
modifier le source du script ou faire des add-ons ou encore des images pour le
programme.<br>
<br>
La contribution de TipiaK est un programme assez sympa, il s'agit d'un pager, le
nom de cet add-on est :&nbsp;<br>
Next[NX] Messenger.<br>
<br>
Ce script mIRC une fois chargé va ecouter tous vos messages en Querry (private)
et pour chaque message qui commencera par<br>
le mot page, une fenetre apparaitra avec le nick de la personne et le message
qui suit le mot page.<br>
De plus, un fichier HTML sera créé sur votre bureau de windows pour loguer
tous les messages que vous avez deja eu, ce<br>
fichier est composé d'un titre, un tableau avec une colonne Nick et une colonne
Message.<br>
Si le fichier HTML n'existe pas, il sera créé et initialisé, s'il existe, il
sera mis a jour.<br>
Pareil pour la fenetre.<br>
<br>
Mais alors me direz vous, quel est le rapport entre Next[NX] Messenger et le C ?<br>
C'est tres simple, le veritable interet de ce messenger est que l'add-on lui
meme est un programme en C ecrit par moi,<br>
qui en fonction des options que vous choisirez, va générer le plug-in de facon
personalisé, ainsi, notre plug-in<br>
bénéficie du support de skin et du choix de path personalisé (l'endroit ou
generer le script mIRC et l'endroit ou generer<br>
le fichier .html).<br>
<br>
3 skins sont actuellement disponible, le skin TipiaK, le skin Terminal et le
skin Epsylon.<br>
<br>
Le programme est commenté et est fourni a titre d'exemple pour cet article, en
fait, ce programme EST l'article.<br>
En lisant attentivement le source de ce programme, vous apprendrez a structurer
votre programme, vous apprendrez a gerer<br>
des menus, a moduler votre source mais aussi a le commenter, a gerer la memoire,
les fichiers, les structures et le<br>
transfert de données d'un fichier vers une structure (restauration des
parametres.)<br>
<br>
Pour developper un tel programme, vous devez deja avoir un plan, vous devez
savoir ce dont vous avez besoin.<br>
Dans notre exemple, on a besoin :<br>
<br>
- D'un ecran de présentation du programme.<br>
- D'un menu central redirigeant vers differents modules, ce menu doit présenter
les options suivantes :<br>
- Choix du skin<br>
- Choix du path pour le fichier HTML<br>
- Choix du path pour le plug-in (le fichier .mrc)<br>
- Générer le plug-in (quand toutes les options ont étées choisies), Sauver
les parametres et biensur les charger.<br>
- Quitter le programme<br>
- Le tout doit tenir dans une fenetre MS-DOS standard.<br>
- Des couleurs pas trop tappe-a-l'oeuil<br>
- Un module different pour chaque action<br>
- ne pas oublier, un prototype pour chaque module<br>
- Un commentaire au debut du programme et un a la fin.<br>
<br>
Voici notre commentaire du debut :</font><br>
</p>
   <p>
<br>
<font face="Courier New" size="2">----------------------------- CUT HERE
-----------------------------<br>
</font>
</p>
    <p>
<font face="Courier New" size="2"><br>
<font color=#408080><i>/* Next[NX] Messenger Generator v1.50f by LoginX  TipiaK */</i></font>
<br>
<font color=#408080><i>/* Un grand nombre de bugs ont étés fixés (tous les bugs connus) */</i></font>
<br>
<font color=#408080><i>/* Le programme est maintenant capable de sauvegarder et recharger */</i></font>
<br>
<font color=#408080><i>/* Tous les parametres sans sortir de l'interface... */</i></font>
<br>
<font color=#408080><i>/* Les skins ont étés améliorés, le source du script et du fichier HTML aussi */</i></font>
<br>
<font color=#408080><i>/* Le programme devrait pouvoir se compiler sans aucun warning ou erreur de compilation */</i></font>
<br>
<font color=#408080><i>/* Pour tout commentaire ou suggestion, ecrivez a loginx@tipiak.net */</i></font>

<br>
<br>

<font color=#408080><i>/* Last modified Thursday July the 7th 2000 at 2.00am by LoginX */</i></font>
<br>
</font>
</p>
      <p>
<font face="Courier New" size="2"><br>
----------------------------- CUT HERE -----------------------------</font></p>
        <p>
<font face="Courier New" size="2"><br>
Voici maintenant les headers dont nous allons avoir besoin, tout au long de ce
programme :<br>
<br>
<font color="#408080"><i>/* Next[NX] Messenger Generator v1.4.8b by LoginX
TipiaK */</i></font><br>
<font color="#408080"><i>/* Un grand nombre de bugs ont étés fixés (tous les
bugs connus) */</i></font><br>
<font color="#408080"><i>/* Le programme est maintenant capable de sauvegarder
et recharger */</i></font><br>
<font color="#408080"><i>/* Tous les parametres sans sortir de l'interface... */</i></font><br>
<font color="#408080"><i>/* Les skins ont étés améliorés, le source du
script et du fichier HTML aussi */</i></font><br>
<font color="#408080"><i>/* Le programme devrait pouvoir se compiler sans aucun
warning ou erreur de compilation */</i></font><br>
<font color="#408080"><i>/* Pour tout commentaire ou suggestion, ecrivez a
loginx@tipiak.net */</i></font><br>
<br>
<font color="#408080"><i>/* Last modified Thursday July the 7th 2000 at 2.00am
by LoginX */</i></font>
</font>



</p>
        <p>
<font face="Courier New" size="2"><br>
----------------------------- CUT HERE -----------------------------<br>
</font>



</p>
        <p>
<font face="Courier New" size="2"><font color="#008000">#include &lt;stdio.h&gt;</font><br>
<font color="#008000">#include &lt;string.h&gt;</font><br>
<font color="#008000">#include &lt;conio.h&gt;</font><br>
<font color="#008000">#include &lt;dos.h&gt;</font><br>
<font color="#008000">#include &lt;stdlib.h&gt;</font>
<br>
</font>



</p>
        <p>
<font face="Courier New" size="2">----------------------------- CUT
          HERE -----------------------------<br>
</font>



</p>
            <p><font face="Courier New" size="2">A partir de maintenant, tout le
            code est commenté, plus besoin de me faire chier avec mes CUT HERE
            a la con.</font></p>
        <p>
<font face="Courier New" size="2"><font color="#408080"><i>/* STRUCTURES */</i></font><br>
<br>
<b>struct</b> SKIN {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Initialisation de la structure qui contiendra les
informations du skin choisi */</i></font><br>
<b>char</b> * textcolor;<br>
<b>char</b> * background;<br>
<b>char</b> * tableback;<br>
<b>char</b> * rollover;<br>
<b>char</b> * regularlink;<br>
<b>char</b> * vlink;<br>
<b>char</b> * alink;<br>
<b>char</b> * name;<br>
<b>char</b> * font;<br>
<b>char</b> * pathtml;<br>
<b>char</b> * pathmrc;<br>
} skin;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Creation immediate d'une structure de ce type */</i></font><br>
<br>
<font color="#408080"><i>/* PROTOTYPES */</i></font><br>
<br>
<b>void</b> present (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Ecran de presentation */</i></font><br>
<b>int</b> central (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Menu principal */</i></font><br>
<b>int</b> skinmenu (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Menu SKIN */</i></font><br>
<b>int</b> pathmenu (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Menu path */</i></font><br>
<b>int</b> lastmenu (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Menu creation */</i></font><br>
<b>void</b> epsylonskin (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Choix du skin Epsylon (et remplissage de la structure SKIN -&gt; skin en
consequence */</i></font><br>
<b>void</b> tipiakskin (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Choix du skin TipiaK (et remplissage de la structure SKIN -&gt; skin en
consequence */</i></font><br>
<b>void</b> termskin (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Choix du skin Terminal (et remplissage de la
structure SKIN -&gt; skin en consequence */</i></font><br>
<b>void</b> bureau_fr (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Choix du path bureau de windows version FR */</i></font><br>
<b>void</b> bureau_us (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Choix du path bureau de windows version US */</i></font><br>
<b>void</b> custopath (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Choix d'un path personalise */</i></font><br>
<b>void</b> type_error (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Message d'erreur par defaut */</i></font><br>
<b>void</b> generate (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Generation du script personalise */</i></font><br>
<b>void</b> save (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Sauvegarde des parametres */</i></font><br>
<b>void</b> custohtml (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Choix d'un path personalise pour le fichier HTML */</i></font><br>
<b>void</b> html_bus (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Choix du path bureau de windows version US pour le
fichier HTML */</i></font><br>
<b>void</b> html_bfr (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Choix du path bureau de windows version FR pour le
fichier HTML */</i></font><br>
<b>int</b> htmlmenu (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Menu choix du path pour le fichier HTML */</i></font><br>
<b>int</b> load (<b>void</b>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Chargement automatique de parametres */</i></font><br>
<br>
<font color="#408080"><i>/* VARIABLES GLOBALES */</i></font><br>
<br>
<b>char</b> pager[150];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Ces 2 variables contiendront les paths pour le
script et le fichier HTML */</i></font><br>
<b>char</b> html[150];<br>
<br>
<font color="#408080"><i>/* ******************** MAIN ******************** */</i></font><br>
<br>
<b>int</b> main (<b>void</b>)<br>
{<br>
<br>
<b>int</b> centralans, skinans,&nbsp;&nbsp; <font color="#408080"><i>/* On
defini ici les variables qui stoqueront les retours des fonctions suivantes */</i></font><br>
pathans, lastans, htmlans;<br>
<br>
present();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* On balance l'ecran d'accueil */</i></font><br>
<br>
central:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Ici on place juste un label pour plus tard */</i></font><br>
centralans = central();&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/* La
variable centralans contiens maintenant le retour de la fonction central() */</i></font><br>
<br>
<b>switch</b> (centralans)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
On dirige l'utilisateur vers la fonction qu'il a choisi en fonction<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
de la valeur de centralans */</i></font><br>
{<br>
<b>case</b> <font color="#ff0000">'1'</font>:&nbsp; { skinans = skinmenu(); goto
skinanswer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'2'</font>:&nbsp; { pathans = pathmenu(); goto
pathanswer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'3'</font>:&nbsp; { htmlans = htmlmenu(); goto
htmlanswer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'4'</font>:&nbsp; { lastans = lastmenu(); goto
lastanswer;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'5'</font>:&nbsp; { <b>return</b>(EXIT_SUCCESS);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>default</b>:&nbsp;&nbsp; { type_error(); goto central;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
}<br>
<br>
skinanswer:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Et ainsi de suite pour toutes les autres fonctions
*/</i></font><br>
<b>switch</b> (skinans)<br>
{<br>
<b>case</b> <font color="#ff0000">'1'</font>:&nbsp; { epsylonskin(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'2'</font>:&nbsp; { tipiakskin(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'3'</font>:&nbsp; { termskin(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'4'</font>:&nbsp; { goto central;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>default</b>:&nbsp;&nbsp; { type_error(); skinans = skinmenu(); goto
skinanswer; }<br>
}<br>
goto central;<br>
<br>
pathanswer:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Ca commence a avoir de la gueule */</i></font><br>
<b>switch</b> (pathans)<br>
{<br>
<b>case</b> <font color="#ff0000">'1'</font>:&nbsp; { bureau_fr(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'2'</font>:&nbsp; { bureau_us(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'3'</font>:&nbsp; { custopath(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'4'</font>:&nbsp; { goto central;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>default</b>:&nbsp;&nbsp; { type_error();pathans = pathmenu(); goto
pathanswer;&nbsp; }<br>
}<br>
goto central;<br>
<br>
htmlanswer:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Sous Borland C++ ca tape bien, l'alignement a une
sacree gueule */</i></font><br>
<b>switch</b> (htmlans)<br>
{<br>
<b>case</b> <font color="#ff0000">'1'</font>:&nbsp; { html_bfr(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'2'</font>:&nbsp; { html_bus(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'3'</font>:&nbsp; { custohtml(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'4'</font>:&nbsp; {goto central;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>default</b>:&nbsp;&nbsp; { type_error(); htmlans = htmlmenu(); goto
htmlanswer; }<br>
}<br>
goto central;<br>
<br>
lastanswer:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* l33t... ph34r */</i></font><br>
<b>switch</b> (lastans)<br>
{<br>
<b>case</b> <font color="#ff0000">'1'</font>:&nbsp; { generate(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'2'</font>:&nbsp; { save(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'3'</font>:&nbsp; { load(); <b>break</b>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>case</b> <font color="#ff0000">'4'</font>:&nbsp; { goto central;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<b>default</b>:&nbsp;&nbsp; { type_error(); lastans = lastmenu(); goto
lastanswer; }<br>
}<br>
goto central;<br>
}<br>
<br>
<b>void</b> present (<b>void</b>)<br>
{<br>
<b>struct</b> date dmy;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* la structure date est integree dans dos.h, voici la
structure telle qu'on la<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
trouve dans la lib :<br>
struct date {<br>
&nbsp; int da_year;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; current year<br>
&nbsp; char da_day;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; day of the month<br>
&nbsp; char da_mon;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; month (1 = Jan)<br>
}; */</i></font><br>
<br>
clrscr();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/*Ici, on nettoie l'ecran (au sens figure bien sur */</i></font><br>
fflush(stdout);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Maintenant, on vide la memoire de stdout */</i></font><br>
gotoxy(16,8);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* On place le curseur a 14 dans l'axe des x, 8 dans
l'axe des y */</i></font><br>
textcolor(14);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Le nom de la fonction parle de lui meme */</i></font><br>
cprintf(<font color="#ff0000">&quot;NEXT[NX] Pager Genrerator by LoginX
(TipiaK)&quot;</font>);<br>
gotoxy(14+8,9);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
On utilise cprintf au lieu de printf seulement quand on a besoin des couleurs */</i></font><br>
cprintf(<font color="#ff0000">&quot;Get it at http://www.tipiak.net/&quot;</font>);<br>
getdate(&amp;dmy);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Remplissage automatique de la structure dmy (la
date) */</i></font><br>
gotoxy(12+4,10);<br>
textcolor(12);<br>
cprintf(<font color="#ff0000">&quot;Date : %2.2d/%2.2d/%4.4d Date du programme :
14/06/2000&quot;</font>, dmy.da_day, dmy.da_mon, dmy.da_year);<br>
gotoxy(27,12);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* sur la ligne au dessus, on affiche juste la date */</i></font><br>
textcolor(138);<br>
cprintf(<font color="#ff0000">&quot; FINAL VERSION 1.50f ! &quot;</font>);<br>
gotoxy(10+8,14);<br>
textcolor(15);<br>
cprintf(<font color="#ff0000">&quot;Pressez la touche Return pour
continuer&quot;</font>);<br>
fflush(stdin);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Maintenant on vide le buffer d'entree standart (le
clavier en general) */</i></font><br>
getchar();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Getchar retourne une valeur apres l'appui de la
touche [enter] */</i></font><br>
}<br>
<br>
<b>int</b> central (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* La ca devient interressant */</i></font><br>
{<br>
clrscr();<br>
textcolor(15);<br>
gotoxy(20,7);<br>
cprintf(<font color="#ff0000">&quot;1 - Choisir votre Skin&quot;</font>);<br>
gotoxy(20,9);<br>
cprintf(<font color="#ff0000">&quot;2 - Choisir l'emplacement du fichier
pager-html.mrc&quot;</font>);<br>
gotoxy(20,11);<br>
cprintf(<font color="#ff0000">&quot;3 - Choisir l'emplacement du fichier
HTML&quot;</font>);<br>
gotoxy(20,13);<br>
cprintf(<font color="#ff0000">&quot;4 - G\202n\202rer / Sauver / Charger&quot;</font>);<br>
gotoxy(20,15);<br>
cprintf(<font color="#ff0000">&quot;5 - Quitter&quot;</font>);<br>
gotoxy(20,17);<br>
fflush(stdin);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* On vient d'afficher le menu a l'ecran, on vide le
buffer clavier */</i></font><br>
<b>return</b> getche();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Interressant, la fonction getche s'execute et la valeur indiquée par */</i></font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* l'utilisateur est donc le retour, grace a retour(),
ca devient aussi le<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
retour de la fonction */</i></font><br>
}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Maintenant, c'est plus que de la routine tout ca */</i></font><br>
<b>int</b> skinmenu (<b>void</b>)<br>
{<br>
clrscr();<br>
textcolor(15);<br>
gotoxy(20,7);<br>
cprintf(<font color="#ff0000">&quot;1 - Skin Epsylon&quot;</font>);<br>
gotoxy(20,9);<br>
cprintf(<font color="#ff0000">&quot;2 - Skin TipiaK&quot;</font>);<br>
gotoxy(20,11);<br>
cprintf(<font color="#ff0000">&quot;3 - Skin Terminal&quot;</font>);<br>
gotoxy(20,13);<br>
cprintf(<font color="#ff0000">&quot;4 - Menu pr\202c\202dent&quot;</font>);<br>
gotoxy(20,15);<br>
<b>return</b> getche();<br>
}<br>
<br>
<b>int</b> pathmenu (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Encore meme chose */</i></font><br>
{<br>
clrscr();<br>
textcolor(14);<br>
gotoxy(20,7);<br>
cprintf(<font color="#ff0000">&quot;1 - Bureau Windows 95/98 version FRANCAISE
** DEFAULT **&quot;</font>);<br>
textcolor(15);<br>
gotoxy(20,9);<br>
cprintf(<font color="#ff0000">&quot;2 - Bureau Windows 95/98 version US&quot;</font>);<br>
gotoxy(20,11);<br>
cprintf(<font color="#ff0000">&quot;3 - Personaliser l'emplacement&quot;</font>);<br>
gotoxy(20,13);<br>
cprintf(<font color="#ff0000">&quot;4 - Menu pr\202c\202dent&quot;</font>);<br>
gotoxy(20,15);<br>
<b>return</b> getche();<br>
}<br>
<br>
<b>int</b> lastmenu (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* En voila encore une couche */</i></font><br>
{<br>
clrscr();<br>
textcolor(15);<br>
gotoxy(20,7);<br>
cprintf(<font color="#ff0000">&quot;1 - G\202n\202rer votre pager&quot;</font>);<br>
gotoxy(20,9);<br>
cprintf(<font color="#ff0000">&quot;2 - Sauver les param\212tres&quot;</font>);<br>
gotoxy(20,11);<br>
cprintf(<font color="#ff0000">&quot;3 - Charger des param\212tres&quot;</font>);<br>
gotoxy(20,13);<br>
cprintf(<font color="#ff0000">&quot;4 - Menu Pr\202c\202dent&quot;</font>);<br>
gotoxy(20,13);<br>
<b>return</b> getche();<br>
}<br>
<br>
<b>void</b> epsylonskin (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Cette fonction remplis la structure SKIN -&gt; skin */</i></font><br>
{<br>
skin.name = <font color="#ff0000">&quot;E P S Y L O N&quot;</font>;<br>
skin.textcolor = <font color="#ff0000">&quot;#FFFFFF&quot;</font>;<br>
skin.background = <font color="#ff0000">&quot;#808080&quot;</font>;<br>
skin.tableback = <font color="#ff0000">&quot;#C0C0C0&quot;</font>;<br>
skin.regularlink = <font color="#ff0000">&quot;#FFFF00&quot;</font>;<br>
skin.vlink = <font color="#ff0000">&quot;#FFFF00&quot;</font>;<br>
skin.alink = <font color="#ff0000">&quot;#FFFF00&quot;</font>;<br>
skin.rollover = <font color="#ff0000">&quot;#E8E8E8&quot;</font>;<br>
skin.font = <font color="#ff0000">&quot;Georgia, \&quot;</font>Times New Roman\<font color="#ff0000">&quot;,
Times, serif&quot;</font>;<br>
}<br>
<br>
<b>void</b> tipiakskin (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Pareil */</i></font><br>
{<br>
skin.name = <font color="#ff0000">&quot;T I P I A K&quot;</font>;<br>
skin.textcolor = <font color="#ff0000">&quot;#FFFFFF&quot;</font>;<br>
skin.background = <font color="#ff0000">&quot;#000000&quot;</font>;<br>
skin.tableback = <font color="#ff0000">&quot;#000080&quot;</font>;<br>
skin.regularlink = <font color="#ff0000">&quot;#008000&quot;</font>;<br>
skin.vlink = <font color="#ff0000">&quot;#008000&quot;</font>;<br>
skin.alink = <font color="#ff0000">&quot;#008000&quot;</font>;<br>
skin.rollover = <font color="#ff0000">&quot;#00FFFF&quot;</font>;<br>
skin.font = <font color="#ff0000">&quot;Verdana, Arial, Helvetica,
sans-serif&quot;</font>;<br>
}<br>
<br>
<b>void</b> termskin (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Le C c'est cool, ca se repete souvent sur les progs
de ce genre la */</i></font><br>
{<br>
skin.name = <font color="#ff0000">&quot;T E R M I N A L&quot;</font>;<br>
skin.textcolor = <font color="#ff0000">&quot;#00FF00&quot;</font>;<br>
skin.background = <font color="#ff0000">&quot;#000000&quot;</font>;<br>
skin.tableback = <font color="#ff0000">&quot;#006666&quot;</font>;<br>
skin.regularlink = <font color="#ff0000">&quot;#FFFFFF&quot;</font>;<br>
skin.vlink = <font color="#ff0000">&quot;#FFFFFF&quot;</font>;<br>
skin.alink = <font color="#ff0000">&quot;#FFFFFF&quot;</font>;<br>
skin.rollover = <font color="#ff0000">&quot;#00FF00&quot;</font>;<br>
skin.font = <font color="#ff0000">&quot;\&quot;</font>Courier New\<font color="#ff0000">&quot;,
Courier, mono&quot;</font>;<br>
}<br>
<br>
<b>void</b> bureau_fr (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Aucun secret, on remplis juste la variable de path pager avec le<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
path du bureau de windows version FR. Nouveau, on remplis aussi<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
skin.pathmrc parce que ca rentre dans la structure skin donc quand<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
on veut sauver tous les parametres, on sauve que la structure dans<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
un fichier, c'est plus facile a ecrire et plus facile a lire.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Si l'option de sauvegarde/chargement des parametres n'existait pas<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
on aurait pas besoin de la premiere ligne de ce module.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/</i></font><br>
{<br>
skin.pathmrc = <font color="#ff0000">&quot;c:\\windows\\bureau\\pager-html.mrc&quot;</font>;<br>
strcpy(pager, <font color="#ff0000">&quot;c:\\windows\\bureau\\pager-html.mrc\0&quot;</font>);<br>
}<br>
<br>
<b>void</b> bureau_us (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Pareil, mais version US */</i></font><br>
{<br>
skin.pathmrc = <font color="#ff0000">&quot;c:\\windows\\desktop\\pager-html.mrc&quot;</font>;<br>
strcpy(pager, <font color="#ff0000">&quot;c:\\windows\\desktop\\pager-html.mrc\0&quot;</font>);<br>
}<br>
<br>
<b>void</b> custopath (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
La c'est different, la personne doit indiquer elle meme son path */</i></font><br>
{<br>
<br>
<b>char</b> path1[150];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
La reponse de la personne sera stoquee la dedans */</i></font><br>
<br>
clrscr();<br>
textcolor(15);<br>
gotoxy(20,14);<br>
cprintf(<font color="#ff0000">&quot;Entrez ici le path&quot;</font>);<br>
gotoxy(20,15);<br>
cprintf(<font color="#ff0000">&quot;Mais PAS le nom du fichier ni le \&quot;</font>\\\<font color="#ff0000">&quot;&quot;</font>);<br>
gotoxy(20,16);<br>
cprintf(<font color="#ff0000">&quot;a la fin du path.&quot;</font>);<br>
gotoxy(20,17);<br>
cprintf(<font color="#ff0000">&quot;Ex : c:\\mirc&quot;</font>);<br>
gotoxy(20,19);<br>
getch();<br>
gets(path1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* gets() parce que je le vaux bien */</i></font><br>
kbhit();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* ca, c'est juste pour qu'il vous affiche pas votre
derniere reponse */</i></font><br>
strcat(pager, path1);&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
strcat, tout le monde connait... je commente pas trop */</i></font><br>
strcat(pager, <font color="#ff0000">&quot;\\pager-html.mrc\0&quot;</font>);<br>
skin.pathmrc = pager;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/* Pour
sauvegarder, on redirige le contenu de pager dans skin.pathmrc comme avant */</i></font><br>
}<br>
<br>
<b>void</b> type_error (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
La c'est un truc qui reviendra a chaque erreur, comme vous pouvez voir<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
sur les switch`s de main(); */</i></font><br>
{<br>
gotoxy(20,20);<br>
textcolor(12);<br>
cprintf(<font color="#ff0000">&quot;Erreur, fonction non reconnue ! Veuillez
re-essayer&quot;</font>);<br>
sleep(2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Un petit delais pour que le mec refflechisse avant
de faire des<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
conneries, et pour eviter un overflow */</i></font><br>
}<br>
<br>
<b>void</b> generate (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* La on ouvre un fichier, on ecrit le script dedans,
les variables<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
sont les personalisation par le programme */</i></font><br>
{<br>
FILE * pfile;<br>
<br>
pfile = fopen(skin.pathmrc, <font color="#ff0000">&quot;wt&quot;</font>);<br>
<br>
fprintf(pfile, <font color="#ff0000">&quot;;NOM DU SKIN : %s\n&quot;</font>,
skin.name);<br>
fprintf(pfile, <font color="#ff0000">&quot;on *:text:page*:?:{\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; if ($exists(%s) = $true) {\n&quot;</font>,
html);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">//write
%s &lt;tr&gt; $crlf &lt;td width=\&quot;50%\&quot;&gt; $+ $nick $+ &lt;/td&gt;
$crlf </font><font color="#ff0000">&quot;</font>, html);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">&lt;td
width=\&quot;50%\&quot;&gt; $+ $2- $+&lt;/td&gt; $crlf &lt;/tr&gt;\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; }\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; else {\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;//write %s &lt;html&gt; $crlf $crlf
&lt;head&gt; $crlf &lt;meta name=\&quot;</font>GENERATOR\<font color="#ff0000">&quot;
&quot;</font>, html);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">content=\&quot;Next[NX]
HTML Pager v1.5f by TipiaK\&quot;&gt; $crlf &lt;title&gt;Next[NX] Messenger
v1.5f &quot;</font>);<br>
fprintf(pfile, <font color="#FF0000">&quot;- by TipiaK&lt;/title&gt; $crlf
&lt;style type=\&quot;text/css\&quot;&gt; $crlf &lt;!-- $crlf body &quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;{font-family: %s} $crlf a:hover
\{color: %s\; text-decoration: none}&quot;</font>, skin.font, skin.rollover);<br>
fprintf(pfile, <font color="#ff0000">&quot; $crlf a:link \{color: %s\;
text-decoration: none}&quot;</font>, skin.regularlink);<br>
fprintf(pfile, <font color="#ff0000">&quot; $crlf --&gt; $crlf &lt;/style&gt;
&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">$crlf
&lt;/head&gt; $crlf $crlf &lt;body bgcolor=\&quot;%s\&quot;
text=\&quot;%s\&quot; </font><font color="#ff0000">&quot;</font>,
skin.background, skin.textcolor);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">vlink=\&quot;%s\&quot;
alink=\&quot;%s\&quot; &gt; $crlf $crlf</font><font color="#ff0000">&quot;</font>,
skin.vlink, skin.alink);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000"> &lt;p
align=\&quot;center\&quot;&gt;&lt;b&gt;&lt;u&gt;&lt;font
size=\&quot;5\&quot;&gt;NEXT[NX] PAGER v1.5f par
TipiaK&lt;/font&gt;&lt;/u&gt;&lt;/b&gt;</font><font color="#ff0000">&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">&lt;/p&gt;
$crlf &lt;p align=\&quot;right\&quot;&gt;\n</font><font color="#ff0000">&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">//write
%s &lt;font size=\&quot;5\&quot;&gt;&lt;font size=\&quot;1\&quot;
color=\&quot;%s\&quot;&gt;</font><font color="#ff0000">&quot;</font>, html,
skin.textcolor);<br>
fprintf(pfile, <font color="#ff0000">&quot;Voici vos nouveaux $crlf
messages.&lt;br&gt; $crlf Cet Add-on a été ecrit par TipiaK&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000"> - &lt;a
href=\&quot;http:</font><i><font color="#FF0000">//www.tipiak.net\&quot;&gt;http://www.tipiak.net&lt;/a&gt;&lt;br&gt;
$crlf Des mises</font><font color="#408080">&quot;);</font></i><br>
fprintf(pfile, <font color="#ff0000">&quot; a jour ont étées prévues pour cet
Add-on&lt;/font&gt;&lt;/font&gt;&lt;/p&gt; $crlf &lt;div align=\&quot;</font>center\<font color="#ff0000">&quot;&gt;&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; $crlf &lt;center&gt; $crlf \n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">//write
%s &lt;table border=\&quot;1\&quot; cellspacing=\&quot;1\&quot;
width=\&quot;90%\&quot; bgcolor=\&quot;</font><font color="#ff0000">&quot;,
html);<br>
</font>fprintf(pfile,<font color="#ff0000"> &quot;</font><font color="#FF0000">%s\&quot;
align=\&quot;center\&quot; bordercolor=\&quot;#FFFFFF\&quot;&gt; $crlf
&lt;tr&gt; $crlf &quot;</font>, skin.tableback);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">&lt;td
width=\&quot;50\45\&quot;&gt; $crlf &lt;p
align=\&quot;center\&quot;&gt;&lt;b&gt;N I C K&lt;/b&gt; $crlf&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; </font><font color="#FF0000">&lt;/td&gt;
$crlf &lt;td width=\&quot;50\45\&quot;&gt; $crlf &lt;p
align=\&quot;center\&quot;</font><font color="#ff0000">&gt;&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;&lt;b&gt;M E S S A G E&lt;/b&gt;
$crlf &lt;/td&gt; $crlf &lt;/tr&gt; $crlf \n &quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">//write
%s &lt;tr&gt; $crlf &lt;td width=\&quot;50\45\&quot;&gt; $+ $nick $+</font><font color="#ff0000">&quot;</font>,
html);<br>
fprintf(pfile, <font color="#ff0000">&quot;</font><font color="#FF0000">
&lt;/td&gt; $crlf &lt;td width=\&quot;50\45\&quot;&gt; $+ $2- $+&lt;/td&gt;
$crlf &lt;/tr&gt;</font><font color="#ff0000">&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;\n }\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;if ( $window(@Next[NX]-Messenger) !=
$null ) {\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; /echo 14 @Next[NX]-Messenger $nick :
$2-\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;\n}\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;else {\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; /window -dk(0) +befs
@Next[NX]-Messenger 0 1000 300 100\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; /echo 1 @Next[NX]-Messenger NEXT[NX]
- &#03;14&#02; &#02;M e s s e n g e r&#02;\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; /echo 14 @Next[NX]-Messenger
______________________________\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; /echo 14 @Next[NX]-Messenger
Nouveaux Messages :\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; /echo 14 @Next[NX]-Messenger &#02;
$+ $nick $+ &#02; : $2-\n\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot; }\n&quot;</font>);<br>
fprintf(pfile, <font color="#ff0000">&quot;}\n; ************* FIN DU SCRIPT
*************&quot;</font>);<br>
<br>
fclose(pfile);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Je commente pas, c'est du source mIRC, je commente
pas le code mIRC moi, desole... */</i></font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Et bien sur, on ferme le fichier */</i></font><br>
textcolor(15);<br>
clrscr();<br>
gotoxy(20,10);<br>
cprintf(<font color="#ff0000">&quot;Fichier %s g\202n\202r\202 !&quot;</font>,
pager);<br>
gotoxy(20,11);<br>
cprintf(<font color="#ff0000">&quot;Lancez mIRC et tapez :&quot;</font>);<br>
gotoxy(20,12);<br>
cprintf(<font color="#ff0000">&quot;/load -rs %s&quot;</font>, pager);<br>
gotoxy(20,13);<br>
cprintf(<font color="#ff0000">&quot;Rapportez tout bug a loginx@tipiak.net&quot;</font>);<br>
getch();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* no comment */</i></font><br>
}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* je sais que c'est con de mettre un comment avec
comme texte &quot;no comment&quot; mais bon... */</i></font><br>
<br>
<b>void</b> html_bfr (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* La c'est pour generer le script, faut lui dire ou
mIRC doit balancer le fichier HTML */</i></font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* On retrouve notre structure comme pour le path du
script, toujours pour la meme raison */</i></font><br>
{<br>
skin.pathtml = <font color="#ff0000">&quot;c:\\windows\\bureau\\NEXTNX.html&quot;</font>;<br>
strcpy (html, <font color="#ff0000">&quot;c:\\windows\\bureau\\NEXTNX.html\0&quot;</font>);<br>
}<br>
<br>
<b>void</b> html_bus (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Re-Belotte */</i></font><br>
{<br>
skin.pathtml = <font color="#ff0000">&quot;c:\\windows\\desktop\\NEXTNX.html&quot;</font>;<br>
strcpy (html, <font color="#ff0000">&quot;c:\\windows\\desktop\\NEXTNX.html\0&quot;</font>);<br>
}<br>
<br>
<b>void</b> custohtml (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
On reprends maintenant les concepts du module custopath */</i></font><br>
{<br>
<br>
<b>char</b> html1[150];<br>
<br>
clrscr();<br>
textcolor(15);<br>
gotoxy(20,14);<br>
cprintf(<font color="#ff0000">&quot;Entrez ici le path&quot;</font>);<br>
gotoxy(20,15);<br>
cprintf(<font color="#ff0000">&quot;Mais PAS le nom du fichier ni le \&quot;</font>\\\<font color="#ff0000">&quot;&quot;</font>);<br>
gotoxy(20,16);<br>
cprintf(<font color="#ff0000">&quot;a la fin du path.&quot;</font>);<br>
gotoxy(20,17);<br>
cprintf(<font color="#ff0000">&quot;Ex : c:\\windows\\bureau&quot;</font>);<br>
gotoxy(20,19);<br>
kbhit();<br>
getch();<br>
gets(html1);<br>
strcat(html, html1);<br>
strcat(html, <font color="#ff0000">&quot;\\NEXTNX.html\0&quot;</font>); <font color="#408080"><i>/*
Oubliez pas le zero nul quand vous utilisez strcat !!! */</i></font><br>
skin.pathtml = html;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Et on met aussi le resultat dans la structure pour pouvoir sauver dans un file
*/</i></font><br>
}<br>
<br>
<b>int</b> htmlmenu (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* La c'est le menu qui permet de faire le choix en
question */</i></font><br>
{<br>
clrscr();<br>
textcolor(14);<br>
gotoxy(20,7);<br>
cprintf(<font color="#ff0000">&quot;1 - Bureau Windows 95/98 version FRANCAISE
** DEFAULT **&quot;</font>);<br>
textcolor(15);<br>
gotoxy(20,9);<br>
cprintf(<font color="#ff0000">&quot;2 - Bureau Windows 95/98 version US&quot;</font>);<br>
gotoxy(20,11);<br>
cprintf(<font color="#ff0000">&quot;3 - Personaliser l'emplacement&quot;</font>);<br>
gotoxy(20,13);<br>
cprintf(<font color="#ff0000">&quot;4 - Menu pr\202c\202dent&quot;</font>);<br>
gotoxy(20,15);<br>
<b>return</b> getche();<br>
}<br>
<br>
<b>void</b> save (<b>void</b>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* La c'est pour sauver les parametres, ca marche mais
ca sert a rien,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
j'ai pas encore le temps de faire la fonction qui les lit&nbsp; ;)&nbsp; */</i></font><br>
{<br>
FILE * fileptr;<br>
<br>
fileptr = fopen(<font color="#ff0000">&quot;data_sav.epy&quot;</font>, <font color="#ff0000">&quot;w+&quot;</font>);<br>
<br>
fwrite(&amp;skin, <b>sizeof</b>(skin), 1 , fileptr); <font color="#408080"><i>/*
envoi au fichier de toute la structure */</i></font><br>
<br>
clrscr();<br>
textcolor(15);<br>
gotoxy(25,10);<br>
cprintf(<font color="#ff0000">&quot;Param\212tres sauvegard\202s&quot;</font>);<br>
gotoxy(25,12);<br>
cprintf(<font color="#ff0000">&quot;Skin = %s&quot;</font>, skin.name);<br>
gotoxy(25,14);<br>
cprintf(<font color="#ff0000">&quot;Fichier Script = %s&quot;</font>,
skin.pathmrc);<br>
gotoxy(25,16);<br>
cprintf(<font color="#ff0000">&quot;Fichier HTML = %s&quot;</font>,
skin.pathtml);<br>
<br>
getch();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* On affiche les informations, comme ca on peut
verifier tous les parametres<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Si ca ne va pas, on pourra toujours modifier depuis le programme */</i></font><br>
<br>
fclose(fileptr);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Encore un truc que j'avais oublié dans l'ancienne version... ;) */</i></font><br>
}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Module de chargement des parametres */</i></font><br>
<b>int</b> load (<b>void</b>)<br>
{<br>
FILE * fileptr2;<br>
<br>
clrscr();<br>
textcolor(15);<br>
gotoxy(25,10);<br>
<br>
<b>if</b> ((fileptr2 = fopen(<font color="#ff0000">&quot;data_sav.epy&quot;</font>,
<font color="#ff0000">&quot;r+&quot;</font>)) == NULL)<br>
{<br>
cprintf(<font color="#ff0000">&quot;Aucun parametre sauvegard\202&quot;</font>);<br>
sleep(2);<br>
<b>return</b>(0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Si le fichier data_sav.epy n'existe pas, il n'y a
pas eu de sauvegarde, donc on annule */</i></font><br>
}<br>
<br>
fread(&amp;skin, <b>sizeof</b>(skin), 1, fileptr2);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Mais sinon, on recupere toute la struct du fichier<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(d'ou envoyer les paths dans la struct) */</i></font><br>
strcpy(pager, skin.pathmrc);<br>
strcpy(html, skin.pathtml);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* On remet les info de path a leur place */</i></font><br>
cprintf(<font color="#ff0000">&quot;Parametres charg\202s.&quot;</font>);<br>
gotoxy(25,12);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* Ben ouais, parametres chargés, la structure est
lue, les pointeurs sont redirigés */</i></font><br>
cprintf(<font color="#ff0000">&quot;Skin = %s&quot;</font>, skin.name);<br>
gotoxy(25,14);<br>
cprintf(<font color="#ff0000">&quot;Fichier Script = %s&quot;</font>,
skin.pathmrc);<br>
gotoxy(25,16);<br>
cprintf(<font color="#ff0000">&quot;Fichier HTML = %s&quot;</font>,
skin.pathtml);<br>
<br>
getch();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<font color="#408080"><i>/* On affiche les informations, comme ca on peut
verifier tous les parametres<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Si ca ne va pas, on pourra toujours modifier depuis le programme */</i></font><br>
<br>
fclose(fileptr2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#408080"><i>/*
Tiens, celui la aussi, je l'avais oublié */</i></font><br>
<b>return</b>(0);<br>
}<br>
<br>
<font color="#408080"><i>/* Voila, ce programme est terminé, il fonctionne tres
bien, le format est bon et regulier, le code a une<br>
belle gueule, ce programme a probablement du vous apprendre pas mal de choses si
vous debutez dans le<br>
developpement en C sous windows, il gere tres bien l'ecriture/lecture dans un
fichier, les couleurs,<br>
le positionnement sur l'ecran, les structures, les pointeurs, les systemes de
menus, tout est entierement<br>
modulaire, on peut donc tres facilement ameliorer le programme, ajouter des
skins, etc...<br>
<br>
Maintenant pour ce qui est du script mIRC généré, c'est la partie la plus
bordelique du programme donc<br>
essayez d'y toucher le moins possible, surtout la partie du code HTML, c'est une
partie assez sensible au<br>
moindre changement.<br>
Le script peut bien sur etre amelioré, pour par exemple se mettre en marche que
quand vous etes away<br>
et indiquer a la personne qui vous parlais que son message a bien été pris en
compte et logué, on<br>
peut aussi changer les propriétés de la fenetre, les couleurs, tout peut etre
changé.<br>
<br>
En reponse a une petite question, c'est vrai qu'on pourrait tout mettre dans des
variables mIRC et faire<br>
un petit script qui definies les variables dans le script directement, ce serait
beaucoup plus facile, mais<br>
ce n'est pas que pour le sens pratique des choses que j'ai fait cet add-on,
c'est aussi pour le coté technique<br>
Ca me permet de faire un programme commenté et vous apprendre le language C par
cet intermediaire, pas trop vous<br>
apprendre mais en tout cas, vous donner des astuces de programmation, ca c'est
certain.<br>
<br>
Ce programme et le script mIRC qui en sortent sont tous deux en license
GNU-like, vous pouvez modifier ce programme<br>
ainsi que le script généré mais mon nom ainsi que le nom du programme doit
figurer la ou il figure sur la version<br>
originale.<br>
De plus, je vous invite chaudement a m'envoyer le programme une fois que vous
l'avez modifié, ce qui me permettra<br>
de faire avancer la version originale du programme si besoin est.<br>
Vous avez aussi le droit d'emprunter des routines, modules ou juste des methodes
de programmation que ce soit<br>
sur ce programme ou sur le script mIRC mais un special thanks to LoginX from
TipiaK doit apparaitre quelque part<br>
meme si c'est dans un petit recoin du programme.<br>
<br>
Pour tout commentaire ou suggestion au sujet du programme ou du script, je vous
invite a m'ecrire par email<br>
a l'adresse suivante : loginx@tipiak.net ou encore ecomdespe@hotmail.com<br>
Pour me contacter par ICQ, mon # est 61291004<br>
Venez aussi rejoindre tout le groupe TipiaK sur IRC, server : us.undernet.org<br>
channel : #TipiaK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/</i></font>


</font><br>
<br>
<br>
Voila, notre programme est terminé, aucune erreur de compilation sous borland,
bonne gestion de la memoire, etc...&nbsp;<br>
Maintenant, juste une derniere etape pour tous ceux qui n'ont pas compris
quelque chose dans ce source.<br>
Je vous balance maintenant toutes les instructions et fonctions présentes dans
ce programme, avec leur prototype,<br>
leur syntaxe, leur utilité, des conseils d'utilisations, etc...</p>
  <table border="1" width="100%">
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">Fonction / instruction</font></b></td>
      <td width="20%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">Prototype</font></b></td>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">Include</font></b></td>
      <td width="20%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">Syntaxe</font></b></td>
      <td width="30%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">Utilisation</font></b></td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">struct</font></b></td>
      <td width="10%" bgcolor="#9999FF">&nbsp;</td>
      <td width="10%" bgcolor="#9999FF">&nbsp;</td>
      <td width="20%" bgcolor="#9999FF">struct struct_name{<br>
        &nbsp;&nbsp; type struct_var1;<br>
        &nbsp;&nbsp; type struct_var2;<br>
        &nbsp;&nbsp; etc...<br>
        } structure1, structure2, etc;</td>
      <td width="30%" bgcolor="#9999FF">Utilisez une structure pour groupper plusieurs variables
        dans un meme ensemble, vous pourrez alors operer sur tout l'ensemble ou
        sur chaque variable individuellement.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">switch</font></b></td>
      <td width="20%" bgcolor="#9999FF">&nbsp;</td>
      <td width="10%" bgcolor="#9999FF">&nbsp;</td>
      <td width="30%" bgcolor="#9999FF">switch (variable ou expression)<br>
        &nbsp;&nbsp; {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case (var ou exp): { action1; }<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case (var ou exp): { action2; }<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default: { action; }<br>
        &nbsp;&nbsp; }</td>
      <td width="30%" bgcolor="#9999FF">Switch est une instruction tres utile.<br>
        La valeur de la variable ou expression qui suit switch est comparée a
        la valeur de chaque variable ou expression suivant chaque case, si la
        comparaison retourne une valeur TRUE, l'action suivant le case
        s'execute. Si aucune valeur n'est egale, l'action Default s'execute.&nbsp;</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">label:<br>
        goto label;</font></b></td>
      <td width="20%" bgcolor="#9999FF">&nbsp;</td>
      <td width="10%" bgcolor="#9999FF">&nbsp;</td>
      <td width="20%" bgcolor="#9999FF">votre_label;<br>
        goto votre_label;</td>
      <td width="30%" bgcolor="#9999FF">Utilisez goto pour basculer le controle de votre programme
        jusqu'a la marque votre_label.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">clrscr();</font></b></td>
      <td width="20%" bgcolor="#9999FF">void clrscr(void);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">conio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">clrscr();</td>
      <td width="30%" bgcolor="#9999FF">clrscr(); sert a vider l'ecran en cours de tout texte et
        re-positionner le curseur a la position (1,1)</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">fflush();</font></b></td>
      <td width="20%" bgcolor="#9999FF">int fflush(FILE *stream);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">stdio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">fflush(pointer);</td>
      <td width="30%" bgcolor="#9999FF">fflush est une fonction qui sert a vider un pointeur de
        type stream comme par exemple stdin, stdout, stderr ou meme un FILE
        pointer.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">gotoxy();</font></b></td>
      <td width="20%" bgcolor="#9999FF">void gotoxy(int x; int y);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">conio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">gotoxy(var1, var2);</td>
      <td width="30%" bgcolor="#9999FF">Gotoxy sert a deplacer le curseur a une certaine position
        a l'ecran, le premier chiffre représente l'axe des X et le second,
        l'axe des Y.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">textcolor();</font></b></td>
      <td width="20%" bgcolor="#9999FF">void textcolor(int newcolor);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">conio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">textcolor(valeur decimale);</td>
      <td width="30%" bgcolor="#9999FF">Cette fonction est utilisée pour indiquer au compilateur
        quelle est la couleur a utiliser pour toutes les fonctions utilisant la
        couleur dans le programme.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">cprintf();</font></b></td>
      <td width="20%" bgcolor="#9999FF">int cprintf(const char *format[, argument, ...]);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">conio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">cprintf(&quot;Texte ou %s&quot;, char * var_string =
        &quot;variable&quot;);</td>
      <td width="30%" bgcolor="#9999FF">La fonction cprintf est identique a printf mais elle gere
        la couleur.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">getdate();</font></b></td>
      <td width="20%" bgcolor="#9999FF">void getdate(struct date *datep);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">dos.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">getdate(struct * date struct_date);</td>
      <td width="30%" bgcolor="#9999FF">getdate met les variables contenus dans la structure
        systeme date dans votre structure de type date.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">getchar();</font></b></td>
      <td width="20%" bgcolor="#9999FF">int getchar(void);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">stdio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">getchar();</td>
      <td width="30%" bgcolor="#9999FF">Utilise stdin en tant que variable de type char.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">return();</font></b></td>
      <td width="20%" bgcolor="#9999FF">&nbsp;</td>
      <td width="10%" align="center" bgcolor="#9999FF">&nbsp;</td>
      <td width="20%" bgcolor="#9999FF">return(expression ou variable);</td>
      <td width="30%" bgcolor="#9999FF">Return définit la valeur de retour d'un module puis
        active ce retour.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">strcpy();</font></b></td>
      <td width="20%" bgcolor="#9999FF">char *strcpy(char *dest, const char *src);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">string.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">strcpy(var1, var2);</td>
      <td width="30%" bgcolor="#9999FF">La fonction strcpy copie le contenu d'une variable de type
        string dans une autre.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">kbhit();</font></b></td>
      <td width="20%" bgcolor="#9999FF">int kbhit(void);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">conio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">kbhit();</td>
      <td width="30%" bgcolor="#9999FF">kbhit est utilisé pour savoir si l'utilisateur a tapé
        sur une touche.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">strcat();</font></b></td>
      <td width="20%" bgcolor="#9999FF">char *strcat(char *dest, const char *src);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">string.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">strcat(destination, source);</td>
      <td width="30%" bgcolor="#9999FF">strcat sert a concatener le contenu d'une variable de type
        string a une autre.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">sleep();</font></b></td>
      <td width="20%" bgcolor="#9999FF">void sleep(unsigned seconds);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">dos.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">sleep(valeur decimale);</td>
      <td width="30%" bgcolor="#9999FF">Met le programme en pause pendant x secondes.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">FILE * file;</font></b></td>
      <td width="20%" bgcolor="#9999FF">typedef struct{<br>
        short level;<br>
        unsigned flags;<br>
        char fd;<br>
        unsigned char hold;<br>
        short bsize;<br>
        unsigned char *buffer, *curp;<br>
        unsigned istemp;<br>
        short token;<br>
        } FILE;</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">stdio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">FILE * file_pointer;</td>
      <td width="30%" bgcolor="#9999FF">une structure de type FILE est utilisée pour définir les
        attributs d'un fichiers dans a un pointeur de type FILE.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">fopen();</font></b></td>
      <td width="20%" bgcolor="#9999FF">FILE *fopen(const char *filename, const char *mode);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">stdio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">file_pointer = fopen(fichier.ext, &quot;mode&quot;);</td>
      <td width="30%" bgcolor="#9999FF">fopen sert a ouvrir un fichier pour y attribuer un
        pointeur selon un certain mode.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">fprintf();</font></b></td>
      <td width="20%" bgcolor="#9999FF">int fprintf(FILE *stream, const char *format[, argument,
        ...]);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">stdio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">fprintf(file_pointer, &quot;string = %s&quot;, string);</td>
      <td width="30%" bgcolor="#9999FF">fprintf envoies stdout sur le pointeur indiquée dans la
        parenthèse.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">fclose();</font></b></td>
      <td width="20%" bgcolor="#9999FF">int fclose(FILE *stream);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">stdio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">fclose(file_pointer);</td>
      <td width="30%" bgcolor="#9999FF">fclose est utilisé pour fermer un fichier attribué a un
        pointeur de type FILE.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">getch();</font></b></td>
      <td width="20%" bgcolor="#9999FF">int getch(void);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">conio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">getch();</td>
      <td width="30%" bgcolor="#9999FF">getch() est utilisé pour accepter une valeur stdin sans
        retourner d'echo a l'ecran.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">fwrite();</font></b></td>
      <td width="20%" bgcolor="#9999FF">size_t fwrite(const void *ptr, size_t size, size_t n, FILE
        *stream);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">stdio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">fwrite(structure, sizeof(structure), nombre_de_fois,
        pointer);</td>
      <td width="30%" bgcolor="#9999FF">fwrite ecrit le contenu d'une variable ou structure dans
        un certain format, un certain nombre de fois dans un pointeur.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><b><font color="#FFFFFF">fread();</font></b></td>
      <td width="20%" bgcolor="#9999FF">size_t fread(void *ptr, size_t size, size_t n, FILE
        *stream);</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">stdio.h</font></b></td>
      <td width="20%" bgcolor="#9999FF">fread(structure, sizeof(structure), nombre_de_fois,
        source_pointer);</td>
      <td width="30%" bgcolor="#9999FF">fread lis une structure ou variable dans un certain format
        un certain nombre de fois depuis le pointeur source.</td>
    </tr>
    <tr>
      <td width="10%" align="center" bgcolor="#000080"><font color="#FFFFFF"><b>EXIT_SUCCESS</b></font></td>
      <td width="20%" bgcolor="#9999FF">&nbsp;</td>
      <td width="10%" align="center" bgcolor="#9999FF"><b><font color="#FFFFFF">stdlib.g</font></b></td>
      <td width="20%" bgcolor="#9999FF">return (EXIT_SUCCESS)<br>
        exit (EXIT_SUCCESS)</td>
      <td width="30%" bgcolor="#9999FF">C'est une variable dépendante du
        systeme, un return ou exit retournant cette valeur indique au systeme
        que le programme s'est terminé sans erreur.</td>
    </tr>
  </table>
<p>Note : Afin d'eviter toute erreur possible dans les explications sur ces
instructions, structures, fonctions et variables, j'ai utilisé la documentation
de Borland C++ 5.02 comme source pour les explications quand ces dernieres
etaient disponibles.</p>
<p>Bye</p>
<p align="right"><a href="mailto:loginx@tipiak.net%20?subject= &quot;Next NX Messenger (CounterStrike #3)&quot;">```LoginX```</a></p>
</BODY></HTML>
