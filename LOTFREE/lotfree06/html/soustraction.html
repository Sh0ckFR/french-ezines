<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0022)http://albus/Mon_Site/ -->
<HTML><HEAD><TITLE>Daemonium Albus</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<STYLE type=text/css>
A {
	BORDER-RIGHT: black 0px; COLOR: rgb(155,0,255); BORDER-TOP: black 0px; FONT-WEIGHT: 100; BORDER-LEFT: 0px; BORDER-BOTTOM: black 0px; TEXT-DECORATION: none
}
A:hover {
	FONT-WEIGHT: normal; COLOR: white; FONT-STYLE: italic; LETTER-SPACING: 1px
}
BODY {
	SCROLLBAR-FACE-COLOR: #f7f3e4; SCROLLBAR-HIGHLIGHT-COLOR: #000066; SCROLLBAR-SHADOW-COLOR: #000066; SCROLLBAR-3DLIGHT-COLOR: #000066; SCROLLBAR-ARROW-COLOR: #000066; SCROLLBAR-TRACK-COLOR: #f7f3e4; SCROLLBAR-DARKSHADOW-COLOR: #f7f3e4
	FONT-WEIGHT: normal; FONT-SIZE: 14px; COLOR: rgb(200,0,255); FONT-STYLE: normal; FONT-FAMILY: Fixedsys; TEXT-DECORATION: none
}
EMBED {
	BORDER-RIGHT: rgb(155,0,255) 4px solid; BORDER-TOP: rgb(155,0,255) 4px solid; BORDER-LEFT: rgb(155,0,255) 4px solid; BORDER-BOTTOM: rgb(155,0,255) 4px solid
}
FORM {
	BORDER-RIGHT: rgb(155,0,255) 4px solid; BORDER-TOP: rgb(155,0,255) 4px solid; BORDER-LEFT: rgb(155,0,255) 4px solid; BORDER-BOTTOM: rgb(155,0,255) 4px solid
}
INPUT {
	BORDER-RIGHT: rgb(155,0,255) 1px solid; BORDER-TOP: rgb(155,0,255) 1px solid; BORDER-LEFT: rgb(155,0,255) 1px solid; COLOR: rgb(155,0,255) BORDER-BOTTOM: rgb(155,0,255) 1px solid; BACKGROUND-COLOR: black
}
TABLE {
	BORDER-RIGHT: rgb(155,0,255) 1px solid; BORDER-TOP: rgb(155,0,255) 1px solid; BORDER-LEFT: rgb(155,0,255) 1px solid; BORDER-BOTTOM: rgb(155,0,255) 1px solid
}
</STYLE>

<SCRIPT>
	function Resize()
	{
		largeur = document.body.clientWidth;
		hauteur = document.body.clientHeight;
		page.style.width=largeur;
		page.style.height=hauteur;
	}
</SCRIPT>

<BODY onresize=Resize(); text=white vLink=white aLink=white link=white 
bgColor=black leftMargin=0 topMargin=0 marginheight="0" marginwidth="0">
<SCRIPT>
	document.write("<div id='page' style='width:"+document.body.clientWidth+"px; height:"+document.body.clientHeight+"px; position:absolute; left:0px; top:0px; z-index:1; visibility:visible;'>");
</SCRIPT>

<HR color=rgb(155,0,255) noShade SIZE=1>
<A href="arithmetique.html">[Arithmétique]</A> - <A
href="affichage.html">[Affichage]</A> - <A 
href="addition.html">[Addition]</A> - <A 
href="soustraction.html">[Soustraction]</A> - <A 
href="multiplication.html">[Multiplication]</A> - <A 
href="division.html">[Division]</A>
<HR color=rgb(155,0,255) noShade SIZE=1>


<P align=center><SPAN style="FONT-SIZE: 24pt"><FONT color="#9b64ff">.:: Rubrique 
Arithmétique &gt;&gt; Soustraction ::.</FONT></SPAN></P>
<P>Are you reeaady !!!<BR>Bon la soustraction est quasiement pareille que 
l'addition donc je vais aller très vite.<BR>En gros au lieu d'additionner 2 
nombres 2 à 2 comme dans l'algorithme de l'addition, on les soustrait. </P>
<FORM>
<SCRIPT> document.onmousemove = MoveHandler; function MoveHandler() { document.x = window.event.x + document.body.scrollLeft; document.y = window.event.y + document.body.scrollTop; } function Show() { fenetre.style.visibility = 'visible'; fenetre.style.pixelLeft = document.x; fenetre.style.pixelTop = document.y; } function hide() { fenetre.style.visibility = 'hidden'; } </SCRIPT>

<DIV id=fenetre 
style="Z-INDEX: 2; LEFT: 0px; VISIBILITY: hidden; POSITION: absolute; TOP: 0px">
<TABLE>
  <TBODY>
  <TR>
    <TD bgColor=#000000><IMG src="instruction.jpg" 
      align=middle>Instructions x86</TD>
    <TD bgColor=#000000>
      <P align=right><A onclick=hide();><B>X</B></A></P></TD></TR>
  <TR>
    <TD colSpan=2><IFRAME border=0 name=instruction 
      src="instructions.htm" width=600 
    height=200></IFRAME></TD></TR></TBODY></TABLE></DIV>
  <PRE>	<FONT color=#ff0000>_SOUSTRACTION:</FONT>
		<IMG src="../media/../media/info.jpg" align=middle width="16" height="15"><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> di, <FONT color=#ff0000>_NOMBRE2 	</FONT><FONT color=#666699>;on pointe avec di sur l'offset de _NOMBRE2</FONT>
		<IMG src="../media/../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> cl, [ds:di] 	<FONT color=#666699>;on récupère la longueur du nombre le plus long qui va nous servir de compteur</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> si, <FONT color=#ff0000>_NOMBRE1 	</FONT><FONT color=#666699>;on pointe avec si sur l'offset de _NOMBRE1</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> ch, [ds:si] 	<FONT color=#666699>;on récupère la longueur du nombre le plus court qui va nous servir de compteur</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/XOR.html" target=instruction><B>xor</B></A></FONT> dx, dx 		<FONT color=#666699>;registre qui nous servira pour stocker la retenue.</FONT>
	<FONT color=#ff0000>_BOUCLE</FONT><FONT color=#ff0000>_SUB:</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/INC.html" target=instruction><B>inc</B></A></FONT> di
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/INC.html" target=instruction><B>inc</B></A></FONT> si
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/XOR.html" target=instruction><B>xor</B></A></FONT> ax, ax
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> al, [ds:di] 	<FONT color=#666699>;nombre le plus long</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/XOR.html" target=instruction><B>xor</B></A></FONT> bx, bx
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/TEST.html" target=instruction><B>test</B></A></FONT> ch, ch
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/JE.html" target=instruction><B>je</B></A></FONT> <FONT color=#ff0000>_SUITE</FONT><FONT color=#ff0000>_SUB</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> bl, [ds:si] 	<FONT color=#666699>;nombre le plus court</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/DEC.html" target=instruction><B>dec</B></A></FONT> ch
	<FONT color=#ff0000>_SUITE</FONT><FONT color=#ff0000>_SUB:</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/ADD.html" target=instruction><B>add</B></A></FONT> bx, dx
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><B>sub</B></FONT> ax, bx		<FONT color=#666699>;c'est ici qu'on soustrait les 2 nombres</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> [ds:di], al
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/SHR.html" target=instruction><B>shr</B></A></FONT> ax, 8
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/XOR.html" target=instruction><B>xor</B></A></FONT> bx, bx
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><B>sub</B></FONT> bx, ax
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> dl, bl		<FONT color=#666699>;retenue</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/DEC.html" target=instruction><B>dec</B></A></FONT> cl
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/TEST.html" target=instruction><B>test</B></A></FONT> cl, cl
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/JNE.html" target=instruction><B>jne</B></A></FONT> <FONT color=#ff0000>_BOUCLE</FONT><FONT color=#ff0000>_SUB</FONT>
	
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> di, <FONT color=#ff0000>_NOMBRE2</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> cl, [ds:di]
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/ADD.html" target=instruction><B>add</B></A></FONT> di, cx
	<FONT color=#ff0000>_SIZE</FONT><FONT color=#ff0000>_SUB:</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> al, [ds:di]
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/TEST.html" target=instruction><B>test</B></A></FONT> al, al
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/JNE.html" target=instruction><B>jne</B></A></FONT> <FONT color=#ff0000>_FIN</FONT><FONT color=#ff0000>_SUB</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/DEC.html" target=instruction><B>dec</B></A></FONT> di
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/DEC.html" target=instruction><B>dec</B></A></FONT> cl
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/TEST.html" target=instruction><B>test</B></A></FONT> cl, cl
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/JNE.html" target=instruction><B>jne</B></A></FONT> <FONT color=#ff0000>_SIZE</FONT><FONT color=#ff0000>_SUB</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/INC.html" target=instruction><B>inc</B></A></FONT> cl
	<FONT color=#ff0000>_FIN</FONT><FONT color=#ff0000>_SUB:</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> di, <FONT color=#ff0000>_NOMBRE2</FONT>
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/MOV.html" target=instruction><B>mov</B></A></FONT> [ds:di], cl
	
		<IMG src="../media/info.jpg" align=middle><FONT color=#ffffff><A onclick=Show(); href="instructions/RET.html" target=instruction><B>ret</B></A></FONT> 			<FONT color=#666699>;si non on retourne au programme principal</FONT>
<BR>
</PRE></FORM>
<P>Si on a compris l'addition, on comprend la sosutraction, sinon... heu... je 
sais pas. Bon bref, changeons de sujet, je vais en profiter pour vous apprendre 
à manipuler les variables, je vais vous montrer comment on passe des arguments 
vers une fonction (exactement comme en c) parceque pour l'instant on ne peut que 
additionner (ou soustraire) _NOMBRE1 avec _NOMBRE2.<BR>En c on appelle une 
fonction comme ça: <PRE>	ma_fonction(arg1, arg2, arg3);
</PRE>En fait quand le compilateur c compile un appel de fonction, il met en 
premier les arguments sur la pile, il appelle la fonction via l'instruction call 
et enfin "supprime" les éléments sur la pile: <PRE> 
	push arg3
	push arg2
	push arg1
	call ma_fonction
	add sp, 6		;6 car on a empilé 3 éléments de 2 octets chacun =&gt; 3*2
</PRE>Et au moment où l'on rentre dans la fonction, la pile est comme ça: <PRE>		 ------------------------
	sp	-|	adresse		|
		 |	de retour	|
		 |	pour 'ret'	|
		 ------------------------
	sp+2	-|	argument1	|
		 |	|_arg1		|
		 |			|
		 ------------------------
	sp+4	-|	argument2	|
		 |	|_arg2		|
		 |			|
		 ------------------------
	sp+6	-|	argument3	|
		 |	|_arg3		|
		 |			|
		 ------------------------
		 	||	||
		 	\/	\/
		     Suite de la pile
</PRE>donc pour atteindre l'argument 2 par exemple il suffit de faire ça: <PRE>	mov	si,	sp			;on pointe sur le haut de la pile
	add	si,	4			;fait sp&lt;-sp+4 (cf le graph précédent)
	mov	si,	[ss:si]			;maintenant 'si' pointe sur arg2
</PRE>ensuite lorsqu'on sort de la fonction on restore sp pour qu'il ait la même 
valeur qu'avant l'appel de la fonction, donc comme le 'ret' s'est déjà chargé 
d'enlever l'adresse de retour qui se trouvait sur la pile, il suffit d'ajouter 6 
à la pile pour pointer sur le haut de l'ancienne pile. d'où le:<PRE>	add sp, 6
</PRE>Et voilà vous pouver faire une soustraction maintenant. 
<P></P>
<P>On teste: </P>
<center>
  <img src="../media/soustraction.jpg" width="650" height="329">
</center>
<p>
Et voilà !! motivé pour la suite?
</P>
<HR width="100%" color=white noShade SIZE=1>

<P><U>Voici les différentes rubriques:</U></P>
<UL>
  <LI><A href="instructions/instructions.htm">Instructions des x86</A>. </LI>
</UL>
<UL>
  <LI><A 
  href="arithmetique.html">Arithmétique</A>. 

  <UL>
    <LI><A 
    href="affichage.html">Affichage</A>. 

    <LI><A 
    href="addition.html">Addition</A>. 

    <LI><A 
    href="soustraction.html">Soustraction</A>. 

    <LI><A 
    href="multiplication.html">Multiplication</A>. 

    <LI><A 
    href="division.html">Division</A>. 
    </LI></UL></LI></UL>
<HR color=rgb(155,0,255) noShade SIZE=1>

<P align=center>Daemonium Albus,<BR><A 
href="mailto:blaizard@caramail.com">blaizard@caramail.com</A></P>
<SCRIPT>
document.write("</div>");
</SCRIPT>
</BODY></HTML>
